C51 COMPILER V9.52.0.0   LCDSHOW                                                           06/02/2018 13:38:57 PAGE 1   


C51 COMPILER V9.52.0.0, COMPILATION OF MODULE LCDSHOW
OBJECT MODULE PLACED IN lcdshow.OBJ
COMPILER INVOKED BY: C:\Keil\C51\BIN\C51.EXE lcdshow.c LARGE OPTIMIZE(6,SPEED) BROWSE INCDIR(G:\CB589P) DEBUG OBJECTEXTE
                    -ND TABS(2)

line level    source

   1          #include "system.h"
   2          #include "lcdshow.h"
   3          #include "lcdset.h"
   4          #include "Menu.h"
   5          
   6          
   7          /***************************************修改记录*****************************************************
   8           
   9           Function List：
  10              1、ShowChannel         显示信道信息（信道数、是否是PTY应急信道、是否是ASQ、是否是VOX、是否是高功率、是否
             -是EU DE UK、FM或AM调制）
  11              2、ShowAsq             ASQ设置时 进行闪烁
  12              3、ShowTable           国家表界面显示
  13              4、ShowCountry         国家界面显示
  14              5、ShowPower           功率高低设置显示
  15              6、ShowButtonToneSwitch        切换按键音显示
  16              7、ShowBackColor               切换背景颜色显示 
  17              8、ShowLocked          显示锁键
  18              9、ShowLockedOtherKey  锁键时按其他按键闪烁显示锁键
  19              10、ClearNum           清除数字
  20              11、ShowClear          清除显示
  21              12、ShowAll            全屏显示
  22           Change Log:
  23           
  24          
  25          ****************************************************************************************************/
  26          
  27          extern tMenu mMenu;
  28          
  29          void ShowChannel()
  30          {
  31   1        LCD_NUM1(mCbParam.Channel/10);
  32   1        LCD_NUM2(mCbParam.Channel%10);
  33   1        if(mMenu.emgIndex==0) LCD_PTY(0);
  34   1        else LCD_PTY(1);
  35   1        if(mSqParam.IsAsq==1) LCD_ASQ(1);
  36   1        else  LCD_ASQ(0);
  37   1        if(mSqParam.IsVox==1)LCD_VOX(1);
  38   1        else LCD_VOX(0);
  39   1        if((mCbParam.CountryTable==2||mCbParam.CountryTable==3)&&(mCbParam.TxPower == POWER_HIGH))
  40   1        {
  41   2          LCD_H(1);
  42   2        }
  43   1        else LCD_H(0);
  44   1        switch(mCbParam.Country)
  45   1        {
  46   2          case COUNTRY_EU:
  47   2            LCD_EU();
  48   2            break;
  49   2          case COUNTRY_UK:
  50   2            LCD_UK();
  51   2            break;
  52   2          case COUNTRY_DE:
  53   2            LCD_DE();
C51 COMPILER V9.52.0.0   LCDSHOW                                                           06/02/2018 13:38:57 PAGE 2   

  54   2            break;
  55   2          default:
  56   2            LCD_OtherContry();
  57   2            break;
  58   2        }
  59   1        if(mCbParam.Modu==AM) LCD_AM();   
  60   1        else LCD_FM();
  61   1      }
  62          
  63          void ShowTable()
  64          {
  65   1        LCD_TABLE(mCbParam.CountryTable);
  66   1      }
  67            
  68          void ShowCountry()
  69          {
  70   1        LCD_COUNTRY(mCbParam.Country+mCbParam.Band);
  71   1      }
  72          
  73          void ShowPower()
  74          {
  75   1        LCD_POWER(mCbParam.TxPower);
  76   1      }
  77          void ShowButtonToneSwitch()
  78          {
  79   1        LCD_BUTTONTONE(mCbParam.ButtonToneSwitch);
  80   1      }
  81          void ShowReset()
  82          {
  83   1        LCD_RESET();
  84   1      }
  85          void ShowBackColor(u8 i)
  86          {
  87   1        if(i==1)
  88   1        {
  89   2          LCD_COLOR(mCbParam.LcdColor);
  90   2        }
  91   1        switch(mCbParam.LcdColor)
  92   1        {
  93   2          case 0:
  94   2            CLS_LIGHT_B;
  95   2            LIGHT_R=0;
  96   2            LIGHT_G=0;
  97   2            break;
  98   2          case 1:
  99   2            SET_LIGHT_B;
 100   2            LIGHT_R=0;
 101   2            LIGHT_G=0;
 102   2            break;
 103   2          case 2:
 104   2            CLS_LIGHT_B;
 105   2            LIGHT_R=1;
 106   2            LIGHT_G=0;
 107   2            break;
 108   2          case 3:
 109   2            CLS_LIGHT_B;
 110   2            LIGHT_R=0;
 111   2            LIGHT_G=1;
 112   2            break;
 113   2          case 4:
 114   2            SET_LIGHT_B;
 115   2            LIGHT_R=1;
C51 COMPILER V9.52.0.0   LCDSHOW                                                           06/02/2018 13:38:57 PAGE 3   

 116   2            LIGHT_G=0;
 117   2            break;
 118   2          case 5:
 119   2            SET_LIGHT_B;
 120   2            LIGHT_R=0;
 121   2            LIGHT_G=1;
 122   2            break;
 123   2          case 6:
 124   2            CLS_LIGHT_B;
 125   2            LIGHT_R=1;
 126   2            LIGHT_G=1;
 127   2            break;
 128   2          case 7:
 129   2            SET_LIGHT_B;
 130   2            LIGHT_R=1;
 131   2            LIGHT_G=1;
 132   2            break;
 133   2          default:
 134   2            break;
 135   2        }
 136   1      }
 137          void ShowLocked()
 138          {
 139   1        LCD_LOCK(1);
 140   1      }
 141          void ShowDeLock()
 142          {
 143   1        LCD_LOCK(0);
 144   1      }
 145          void ShowAsq()
 146          {
 147   1        LCD_ASQ(1);
 148   1      }
 149          void ClearNum()
 150          {
 151   1        LCD_NUM_CLEAR();
 152   1      }
 153          void ShowClear()
 154          {
 155   1        LCD_CLEAR();
 156   1      }
 157          void ShowAll()
 158          {
 159   1        LCD_ALL();
 160   1      }
 161          
 162          void ShowTk()
 163          {
 164   1        if (mTimer.TkCyclTime>0)
 165   1        {
 166   2          mTimer.TkCyclTime--;
 167   2        }
 168   1        else
 169   1        {
 170   2          mTimer.TkCyclTime = TK_CYCL_TIME;
 171   2          switch (mMenu.MenuIndex)
 172   2          {
 173   3          case CHANNEL:
 174   3            if (mMenu.isTkShow==1)
 175   3            {
 176   4              if (mSqParam.IsVox==1)  LCD_VOX(1);        //VOX
 177   4              else LCD_VOX(0);
C51 COMPILER V9.52.0.0   LCDSHOW                                                           06/02/2018 13:38:57 PAGE 4   

 178   4              
 179   4              if (mMenu.emgIndex>0)                      //emg
 180   4              { 
 181   5                LCD_NUM1(mCbParam.Channel / 10);
 182   5                LCD_NUM2(mCbParam.Channel % 10);        
 183   5              }
 184   4              mMenu.isTkShow=0;
 185   4            }
 186   3            else
 187   3            {
 188   4              if (mSqParam.IsVox == 1) LCD_VOX(0);    //vox
 189   4      
 190   4              if (mMenu.emgIndex > 0)                      //emg
 191   4              {
 192   5                LCD_NUM_CLEAR();
 193   5              }
 194   4              mMenu.isTkShow=1;
 195   4            }
 196   3            break;
 197   3            default:
 198   3              break;
 199   3          }
 200   2        }
 201   1      }
 202          


MODULE INFORMATION:   STATIC OVERLAYABLE
   CODE SIZE        =    529    ----
   CONSTANT SIZE    =   ----    ----
   XDATA SIZE       =   ----    ----
   PDATA SIZE       =   ----    ----
   DATA SIZE        =   ----    ----
   IDATA SIZE       =   ----    ----
   BIT SIZE         =   ----    ----
END OF MODULE INFORMATION.


C51 COMPILATION COMPLETE.  0 WARNING(S),  0 ERROR(S)
